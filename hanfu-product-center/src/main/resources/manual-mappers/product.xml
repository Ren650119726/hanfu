<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hanfu.product.center.manual.dao.ProductDaoImpl">
	<resultMap id="BaseResultMap" type="com.hanfu.product.center.model.Product">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="hf_name" jdbcType="VARCHAR" property="hfName" />
    <result column="category_id" jdbcType="INTEGER" property="categoryId" />
    <result column="brand_id" jdbcType="INTEGER" property="brandId" />
    <result column="product_desc" jdbcType="VARCHAR" property="productDesc" />
    <result column="boss_id" jdbcType="INTEGER" property="bossId" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="last_modifier" jdbcType="VARCHAR" property="lastModifier" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="is_deleted" jdbcType="SMALLINT" property="isDeleted" />
  </resultMap>
  
  <select id="selectProductById" resultMap="BaseResultMap">
  		SELECT 
  			distinct p1.id, p1.hf_name,
            p1.category_id, p1.brand_id,
            p1.product_desc, p1.boss_id,
            p1.create_time, p1.last_modifier,
            p1.modify_time, p1.is_deleted
    	    FROM
    	    	 product p1
    	    LEFT JOIN 
    	    	 product_instance p2
    	    ON  p1.id = p2.product_id
    	    WHERE p2.stone_id = #{storeId}
  </select>
</mapper>